### Estimator+ export(    estimator,    export_path,    checkpoint_path,    eval_result,    is_the_final_export)estimator: the Estimator to export.export_path: A string containing a directory where to write the export.checkpoint_path: The checkpoint path to export.eval_result: The output of Estimator.evaluate on this checkpoint.is_the_final_export: This boolean is True when this is an export in the end of training. It is False for the intermediate exports during the training. When passing Exporter to tf.estimator.train_and_evaluate is_the_final_export is always False if TrainSpec.max_steps is None.https://www.tensorflow.org/api_docs/python/tf/estimator/Exporter    """    Best Exporter    """    # serving_input_receiver_fn = tf.estimator.export.build_parsing_serving_input_receiver_fn()    # best_exporter = tf.estimator.BestExporter(    #       name="best_exporter",    #       serving_input_receiver_fn=serving_input_receiver_fn,    #       exports_to_keep=5)    # best_exporter.export()            # best_checkpoint_export_path = os.path.join(FLAGS.output_dir, 'model-ckpt-', str(result_eval[0]['global_step']))    # ({'eval_accuracy': 0.6578125, 'eval_loss': 0.9205633, 'loss': 0.9205633, 'global_step': 30000}, [])    # print(best_checkpoint_export_path)    # - **estimator**: the `Estimator` to export.    # - **export_path**: A string containing a directory where to write the export.    # - **checkpoint_path**: The checkpoint path to export.    # - **eval_result**: The output of `Estimator.evaluate` on this checkpoint.    # - **is_the_final_export**: This boolean is True when this is an export in the end of training. It is False for the intermediate exports during the training. When passing `Exporter` to [`tf.estimator.train_and_evaluate`](https://www.tensorflow.org/api_docs/python/tf/estimator/train_and_evaluate) `is_the_final_export` is always False if `TrainSpec.max_steps` is `None`.    # best_export.export(checkpoint_path=os.path.join(FLAGS.output_dir, 'best'),    #                    estimator=estimator,    #                    export_path=FLAGS.output_dir,    #                    eval_result=result_eval,    #                    is_the_final_export=False)+ tensorflow bugs"""    if ckpt and ckpt.model_checkpoint_path:        if args.save_dir == ckpt.model_checkpoint_path:            saver.restore(sess=session, save_path=ckpt.model_checkpoint_path)  # 读取保存的模型        else:            project_name = 'Workspace-of-NLU'            print("args.dir is not ckpt path")            tmp_1 = args.save_dir.split(project_name)[0]            print(tmp_1)            tmp_2 = ckpt.model_checkpoint_path.split(project_name)[1].strip('/')            print(tmp_2)            tmp_path = os.path.join(tmp_1, project_name, tmp_2)            print(tmp_path)            saver.restore(sess=session, save_path=tmp_path)    else:        print("load model error")"""### Stacking work[sunhongchao1@A01-R21-I157-205-1026358 Workspace-of-NLU]$ py script_3_ensemble/3_stacking/3-ensemble-batch-simple.pyLinux/export/home/sunhongchao1/1-NLU/Workspace-of-NLU/data/THUCnews/stacking-3/test.txt/export/home/sunhongchao1/1-NLU/Workspace-of-NLU/output/base/cnn/all/pb-model/test_predictions.tsv1000010000              precision    recall  f1-score   support          体育     0.9553    0.9840    0.9695      1565          娱乐     0.9169    0.9683    0.9419      1105          家居     0.9088    0.8496    0.8782       399          彩票     0.9583    0.8415    0.8961        82          房产     0.9083    0.8082    0.8553       245          教育     0.9030    0.9421    0.9221       484          时尚     0.9252    0.8447    0.8831       161          时政     0.9188    0.8542    0.8854       782          星座     0.8444    0.9500    0.8941        40          游戏     0.8603    0.8864    0.8731       264          社会     0.8484    0.8498    0.8491       586          科技     0.9176    0.9234    0.9205      2037          股票     0.9307    0.9431    0.9369      1794          财经     0.9042    0.8070    0.8528       456   micro avg     0.9187    0.9187    0.9187     10000   macro avg     0.9072    0.8895    0.8970     10000weighted avg     0.9186    0.9187    0.9181     10000/export/home/sunhongchao1/1-NLU/Workspace-of-NLU/data/THUCnews/stacking-3/test.txt/export/home/sunhongchao1/1-NLU/Workspace-of-NLU/output/base/bert/all/test_labels.tsv1000010000              precision    recall  f1-score   support          体育     0.9778    0.9840    0.9809      1565          娱乐     0.9441    0.9783    0.9609      1105          家居     0.9264    0.9148    0.9206       399          彩票     0.8953    0.9390    0.9167        82          房产     0.8656    0.8939    0.8795       245          教育     0.9178    0.9690    0.9427       484          时尚     0.9119    0.9006    0.9062       161          时政     0.9285    0.9130    0.9207       782          星座     0.9070    0.9750    0.9398        40          游戏     0.9368    0.8977    0.9168       264          社会     0.9259    0.8532    0.8881       586          科技     0.9518    0.9494    0.9506      2037          股票     0.9572    0.9470    0.9521      1794          财经     0.8796    0.8969    0.8882       456   micro avg     0.9428    0.9428    0.9428     10000   macro avg     0.9233    0.9294    0.9260     10000weighted avg     0.9429    0.9428    0.9426     10000/export/home/sunhongchao1/1-NLU/Workspace-of-NLU/data/THUCnews/stacking-3/test.txt/export/home/sunhongchao1/1-NLU/Workspace-of-NLU/output/base/rnn/all/pb-model/test_predictions.tsv1000010000              precision    recall  f1-score   support          体育     0.9710    0.9827    0.9768      1565          娱乐     0.9172    0.9620    0.9390      1105          家居     0.8796    0.8421    0.8604       399          彩票     0.9351    0.8780    0.9057        82          房产     0.7887    0.8531    0.8196       245          教育     0.9484    0.9112    0.9294       484          时尚     0.8931    0.8820    0.8875       161          时政     0.8849    0.8747    0.8797       782          星座     0.9722    0.8750    0.9211        40          游戏     0.9016    0.8674    0.8842       264          社会     0.8602    0.8294    0.8445       586          科技     0.9230    0.9244    0.9237      2037          股票     0.9384    0.9348    0.9366      1794          财经     0.8678    0.8640    0.8659       456   micro avg     0.9189    0.9189    0.9189     10000   macro avg     0.9058    0.8915    0.8982     10000weighted avg     0.9189    0.9189    0.9187     10000100001000010000(10000, 14)_result (10000, 42)get meta learner results .../export/home/sunhongchao1/1-NLU/Workspace-of-NLU/data/THUCnews/stacking-3/test.txt              precision    recall  f1-score   support          体育     0.9772    0.9872    0.9822      1565          娱乐     0.9475    0.9801    0.9635      1105          家居     0.9219    0.9173    0.9196       399          彩票     0.9259    0.9146    0.9202        82          房产     0.8696    0.8980    0.8835       245          教育     0.9246    0.9628    0.9433       484          时尚     0.9006    0.9006    0.9006       161          时政     0.9316    0.9054    0.9183       782          星座     0.9500    0.9500    0.9500        40          游戏     0.9365    0.8939    0.9147       264          社会     0.9231    0.8601    0.8905       586          科技     0.9494    0.9485    0.9489      2037          股票     0.9544    0.9571    0.9557      1794          财经     0.9085    0.8925    0.9004       456   micro avg     0.9442    0.9442    0.9442     10000   macro avg     0.9301    0.9263    0.9280     10000weighted avg     0.9441    0.9442    0.9440     10000